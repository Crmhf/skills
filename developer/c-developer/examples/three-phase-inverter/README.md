# 三相并网逆变器示例

基于PR电流控制的三相并网逆变器完整实现。

## 系统架构

```
                DC Link (700V)
                     |
    +----------------+----------------+
    |                |                |
   [S1]            [S3]            [S5]
    |--+          --+--          +--|
    |  |          |   |          |  |
   L1  |         L2   |         L3  |
    |  |          |   |          |  |
    |--+          --+--          +--|
   [S2]            [S4]            [S6]
    |                |                |
    +--------+-------+--------+-------+
             |                |
            Va               Vb
             |       Vc       |
             +--------+-------+
                      |
                   Grid (380V/50Hz)
```

## 控制结构

```
     Vdc_ref +    +--------+    +--------+    +--------+    +--------+
     --------(+)--|  PI    |----|  I_d   |----|  PR    |----|        |
             ^ -  | 电压环 |    |  参考  |    |  d轴   |    |        |
             |    +--------+    +--------+    +--------+    |        |
     Vdc_actual                                               | SVPWM  |
                                                             | 调制   |---> PWM
     Grid      +--------+    +--------+    +--------+       |        |
     Vabc ---->|  PLL   |--->|  I_q   |--->|  PR    |------>|        |
               +--------+    |  参考  |    |  q轴   |       +--------+
               (锁相角θ)     +--------+    +--------+

     Iabc ----->| Clarke |--->| Park   |--->(反馈电流)
               | 变换   |    | 变换   |
```

## 文件结构

```
three-phase-inverter/
├── README.md           # 本文件
├── inc/                # 头文件
│   ├── types.h         # 类型定义
│   ├── pr_controller.h # PR控制器
│   ├── pi_controller.h # PI控制器
│   ├── srf_pll.h       # 锁相环
│   ├── transforms.h    # 坐标变换
│   ├── svpwm.h         # SVPWM
│   ├── protection.h    # 故障保护
│   └── inverter.h      # 逆变器主控
├── src/                # 源文件
│   ├── pr_controller.c
│   ├── pi_controller.c
│   ├── srf_pll.c
│   ├── svpwm.c
│   ├── protection.c
│   └── inverter.c
└── Makefile
```

## 关键参数

| 参数 | 值 | 说明 |
|------|-----|------|
| 开关频率 | 10 kHz | PWM载波频率 |
| 采样频率 | 20 kHz | 电流采样频率（2倍PWM）|
| 直流母线 | 700 V | 额定直流电压 |
| 电网电压 | 380 V | 线电压有效值 |
| 额定功率 | 50 kW | 最大输出功率 |
| 电流环带宽 | 1000 Hz | PR控制器穿越频率 |

## 快速开始

```bash
# 编译
make

# 运行单元测试
make test

# 清理
make clean
```
